{% extends 'base.html' %}
{% load static %}
{% block content %}

<body>
  <div class="container py-2">
      <div class="row">
          <div class="col-sm-12">
              <div class="card">
                  <h5 class="card-header h5 text-center">
                      Scanner
                  </h5>
                  <div class="card-body">
                      <div class="booth">
                          <video id="video" width="100%" height="100%" autoplay>
                          </video>
                      </div>

                      <div class="text-right">
                          <a href="#!" class="btn btn-danger" 
                              onClick="stop()">
                              Stop Cam
                          </a>
                          <a href="#!" class="btn btn-success"
                              onClick="start()">
                              Start Cam
                          </a>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>

  <script>
      var stop = function () {
          var stream = video.srcObject;
          var tracks = stream.getTracks();
          for (var i = 0; i < tracks.length; i++) {
              var track = tracks[i];
              track.stop();
          }
          video.srcObject = null;
      }
      var start = function () {
          var video = document.getElementById('video'),
              vendorUrl = window.URL || window.webkitURL;
          if (navigator.mediaDevices.getUserMedia) {
              navigator.mediaDevices.getUserMedia({ video: true })
                  .then(function (stream) {
                      video.srcObject = stream;
                  }).catch(function (error) {
                      console.log("Something went wrong!");
                  });
          }
      }
      $(function () {
          start();
      });  
  </script>
</body>


{% endblock %}